<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
  <meta name="mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <title>UGC Platform</title>
  <script src="https://telegram.org/js/telegram-web-app.js"></script>
  <link rel="stylesheet" href="/css/orders.css">
  <link rel="stylesheet" href="/css/profile.css">
  <link rel="stylesheet" href="/css/categories.css">
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }
    
    html, body {
      height: 100%;
      width: 100%;
      overflow-x: hidden;
      position: relative;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
    }
    
    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif;
      background-color: #f5f5f5;
      color: #333;
      touch-action: manipulation;
      -webkit-tap-highlight-color: transparent;
      -webkit-touch-callout: none;
      overflow-x: hidden;
      position: relative;
    }
    
    .container {
      max-width: 100%;
      padding: 0 15px 15px;
      margin: 0 auto;
      padding-bottom: env(safe-area-inset-bottom, 15px);
      padding-top: env(safe-area-inset-top, 50px);
    }
    
    header {
      display: flex;
      justify-content: center;
      align-items: center;
      padding: 20px 0;
      border-bottom: 1px solid #eee;
      margin-bottom: 20px;
      position: static;
      background-color: #f5f5f5;
      z-index: 10;
      box-shadow: 0 1px 3px rgba(0,0,0,0.05);
    }
    
    .logo {
      font-size: 28px;
      font-weight: bold;
      color: #007bff;
      text-align: center;
      display: flex;
      align-items: center;
      justify-content: center;
    }
    
    .logo-icon {
      font-size: 32px;
      margin-right: 10px;
    }
    
    .user-menu {
      display: flex;
      align-items: center;
      gap: 15px;
    }
    
    .avatar {
      width: 40px;
      height: 40px;
      border-radius: 50%;
      background-color: #007bff;
      color: white;
      display: flex;
      align-items: center;
      justify-content: center;
      font-weight: bold;
    }
    
    .tabs {
      display: flex;
      border-bottom: 1px solid #ddd;
      margin-bottom: 20px;
      overflow-x: auto;
      -webkit-overflow-scrolling: touch;
      scroll-behavior: smooth;
      white-space: nowrap;
      -ms-overflow-style: none;
      scrollbar-width: none;
      padding: 0 5px;
      background-color: #f5f5f5;
    }
    
    .tabs::-webkit-scrollbar {
      display: none;
    }
    
    .tab {
      padding: 12px 20px;
      cursor: pointer;
      border-bottom: 2px solid transparent;
      -webkit-tap-highlight-color: transparent;
      font-weight: 500;
      transition: color 0.2s, border-color 0.2s;
    }
    
    .tab.active {
      border-bottom-color: #007bff;
      color: #007bff;
      font-weight: 600;
    }
    
    .tab-content {
      display: none;
    }
    
    .tab-content.active {
      display: block;
    }
    
    .card {
      background: white;
      border-radius: 8px;
      padding: 20px;
      box-shadow: 0 2px 5px rgba(0,0,0,0.1);
      margin-bottom: 20px;
    }
    
    .card-title {
      font-size: 18px;
      font-weight: bold;
      margin-bottom: 10px;
    }
    
    .card-content {
      line-height: 1.5;
    }
    
    .categories {
      display: flex;
      gap: 10px;
      margin-bottom: 20px;
      overflow-x: auto;
      padding: 10px 0;
      -webkit-overflow-scrolling: touch;
      scroll-behavior: smooth;
      white-space: nowrap;
      -ms-overflow-style: none;
      scrollbar-width: none;
    }
    
    .categories::-webkit-scrollbar {
      display: none;
    }
    
    .category {
      padding: 12px 24px;
      background-color: #f5f5f5;
      border-radius: 30px;
      cursor: pointer;
      transition: all 0.3s ease;
      border: 1px solid #ddd;
      font-weight: 500;
    }
    
    .category.active {
      background-color: #007bff;
      color: white;
      border-color: #007bff;
      box-shadow: 0 2px 8px rgba(0, 123, 255, 0.3);
    }
    
    .category:hover {
      transform: translateY(-1px);
      box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
    }
    
    .grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
      gap: 15px;
    }
    
    .item {
      background: white;
      border-radius: 8px;
      overflow: hidden;
      box-shadow: 0 2px 5px rgba(0,0,0,0.1);
      cursor: pointer;
      transition: transform 0.2s, box-shadow 0.2s;
    }
    
    .item img {
      width: 100%;
      height: 120px;
      object-fit: cover;
    }
    
    .item-content {
      padding: 12px;
    }
    
    .item-title {
      font-weight: bold;
      margin-bottom: 5px;
      font-size: 14px;
    }
    
    .item-description {
      font-size: 12px;
      color: #666;
      margin-bottom: 8px;
    }
    
    .item-price {
      font-weight: bold;
      color: #007bff;
      font-size: 14px;
      margin-bottom: 8px;
    }
    
    .button {
      padding: 8px 12px;
      background-color: #007bff;
      color: white;
      border: none;
      border-radius: 4px;
      cursor: pointer;
      font-size: 13px;
      display: inline-block;
      -webkit-tap-highlight-color: transparent;
    }
    
    .cart-button {
      position: fixed;
      bottom: calc(20px + env(safe-area-inset-bottom, 0));
      right: 20px;
      background: #007bff;
      color: white;
      padding: 10px 20px;
      border-radius: 30px;
      cursor: pointer;
      box-shadow: 0 2px 10px rgba(0,0,0,0.2);
      z-index: 100;
      -webkit-tap-highlight-color: transparent;
    }
    
    /* Стили для темного режима */
    @media (prefers-color-scheme: dark) {
      body {
        background-color: #232323;
        color: #ffffff;
      }
      
      header {
        background-color: #232323;
        border-bottom-color: #333;
      }
      
      .logo {
        color: #50a8eb;
      }
      
      .card {
        background-color: #333;
      }
      
      .item {
        background-color: #333;
      }
      
      .item-description {
        color: #aaa;
      }
      
      .tab {
        color: #ddd;
      }
      
      .category {
        background-color: #444;
        color: #eee;
      }
      
      .tabs {
        background-color: #232323;
        border-bottom-color: #444;
      }
    }
    
    [data-theme="dark"] {
      background-color: #232323;
      color: #ffffff;
    }
    
    [data-theme="dark"] header {
      background-color: #232323;
      border-bottom-color: #333;
    }
    
    [data-theme="dark"] .logo {
      color: #50a8eb;
    }
    
    [data-theme="dark"] .card {
      background-color: #333;
    }
    
    [data-theme="dark"] .item {
      background-color: #333;
    }
    
    [data-theme="dark"] .item-description {
      color: #aaa;
    }
    
    [data-theme="dark"] .category {
      background-color: #444;
      color: #eee;
    }
    
    [data-theme="dark"] .tabs {
      background-color: #232323;
      border-bottom-color: #444;
    }

    .profile-card {
      max-width: 600px;
      margin: 0 auto;
      padding: 2rem;
    }

    .profile-header {
      display: flex;
      justify-content: center;
      margin-bottom: 2rem;
    }

    .profile-avatar-large {
      width: 100px;
      height: 100px;
      border-radius: 50%;
      background-color: #007bff;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 2.5rem;
      color: white;
      font-weight: bold;
      margin-bottom: 1rem;
    }

    .profile-form-group {
      margin-bottom: 1.5rem;
    }

    .profile-form-group label {
      display: block;
      margin-bottom: 0.5rem;
      font-weight: 500;
      color: #333;
    }

    .profile-form-group input,
    .profile-form-group select {
      width: 100%;
      padding: 0.75rem;
      border: 1px solid #ddd;
      border-radius: 8px;
      font-size: 1rem;
      transition: border-color 0.2s;
    }

    .profile-form-group input:focus,
    .profile-form-group select:focus {
      border-color: #007bff;
      outline: none;
      box-shadow: 0 0 0 2px rgba(0,123,255,0.1);
    }

    .profile-save-button {
      width: 100%;
      padding: 1rem;
      background-color: #007bff;
      color: white;
      border: none;
      border-radius: 8px;
      font-size: 1rem;
      font-weight: 500;
      cursor: pointer;
      transition: background-color 0.2s;
      margin-top: 1rem;
    }

    .profile-save-button:hover {
      background-color: #0056b3;
    }

    /* Dark theme styles */
    [data-theme="dark"] .profile-form-group label {
      color: #fff;
    }

    [data-theme="dark"] .profile-form-group input,
    [data-theme="dark"] .profile-form-group select {
      background-color: #333;
      border-color: #444;
      color: #fff;
    }

    [data-theme="dark"] .profile-form-group input:focus,
    [data-theme="dark"] .profile-form-group select:focus {
      border-color: #50a8eb;
      box-shadow: 0 0 0 2px rgba(80,168,235,0.1);
    }

    .modal {
      display: none;
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background-color: rgba(0, 0, 0, 0.7);
      z-index: 1000;
      overflow: hidden;
      display: none;
      align-items: center;
      justify-content: center;
    }

    .modal-content {
      position: relative;
      background-color: var(--tg-theme-bg-color, #ffffff);
      color: var(--tg-theme-text-color, #000000);
      margin: 0 auto;
      width: 90%;
      max-width: 600px;
      max-height: 85vh;
      border-radius: 12px;
      overflow: hidden;
      animation: modalOpen 0.3s ease;
      box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
    }

    @keyframes modalOpen {
      from {
        transform: translateY(20px) scale(0.95);
        opacity: 0;
      }
      to {
        transform: translateY(0) scale(1);
        opacity: 1;
      }
    }

    .close-modal {
      position: absolute;
      right: 15px;
      top: 15px;
      font-size: 24px;
      color: white;
      cursor: pointer;
      z-index: 10;
      background: rgba(0, 0, 0, 0.5);
      width: 30px;
      height: 30px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .modal-header {
      width: 100%;
      height: 250px;
      overflow: hidden;
    }

    #modal-image {
      width: 100%;
      height: 100%;
      object-fit: cover;
    }

    .modal-body {
      padding: 20px;
      overflow-y: auto;
      max-height: calc(85vh - 250px);
    }

    #modal-title {
      font-size: 24px;
      margin-bottom: 15px;
      color: var(--tg-theme-text-color, #333);
      font-weight: bold;
    }

    #modal-description {
      font-size: 16px;
      line-height: 1.5;
      color: var(--tg-theme-hint-color, #666);
      margin-bottom: 20px;
    }

    #modal-details {
      margin-bottom: 20px;
    }

    #modal-details .item-price {
      color: var(--tg-theme-link-color, #007bff);
      font-weight: bold;
      font-size: 18px;
    }

    .contact-button {
      width: 100%;
      padding: 15px;
      background-color: #007bff;
      color: white;
      border: none;
      border-radius: 8px;
      font-size: 16px;
      cursor: pointer;
      transition: opacity 0.3s;
    }

    .contact-button:hover {
      opacity: 0.9;
    }

    /* Обновите стили для карточек, добавив cursor: pointer */
    .item:hover {
      transform: translateY(-2px);
      box-shadow: 0 4px 10px rgba(0,0,0,0.15);
    }

    /* Обновленные стили для кнопок без использования тем Telegram */
    .contact-button {
      width: 100%;
      padding: 15px;
      background-color: #007bff; /* Фиксированный цвет вместо var(--tg-theme-button-color) */
      color: white; /* Фиксированный цвет вместо var(--tg-theme-button-text-color) */
      border: none;
      border-radius: 8px;
      font-size: 16px;
      cursor: pointer;
      transition: opacity 0.3s;
    }

    .contact-button:hover {
      opacity: 0.9;
    }

    /* Стили для темного режима */
    @media (prefers-color-scheme: dark) {
      .contact-button {
        background-color: #0d6efd;
      }
    }
  </style>
</head>
<body>
  <div class="container">
    <header>
      <div class="logo">
        <span class="logo-icon">🚀</span>
        <span>UGC PRO</span>
      </div>
    </header>
    
    <div class="tabs" id="tabs">
      <div class="tab active" data-tab="orders">Заказы</div>
      <div class="tab" data-tab="influencers">Инфлюенсеры</div>
      <div class="tab" data-tab="categories">Категории</div>
      <div class="tab" data-tab="profile">Профиль</div>
    </div>
    
    <div class="tab-content active" id="orders">
      <div class="card">
        <div class="card-title">Доступные заказы на рекламу</div>
        <div class="card-content">
          Выберите заказ, который вы хотели бы прорекламировать. После выбора вы сможете связаться с заказчиком.
        </div>
      </div>
      
      <h2>Категории</h2>
      <div class="categories" id="order-categories">
        <div class="category active" data-category="all">Все категории</div>
        <div class="category" data-category="fashion">Одежда и аксессуары</div>
        <div class="category" data-category="beauty">Красота и уход</div>
        <div class="category" data-category="electronics">Электроника</div>
        <div class="category" data-category="home">Дом и интерьер</div>
        <div class="category" data-category="sport">Спорт и отдых</div>
        <div class="category" data-category="food">Еда и напитки</div>
        <div class="category" data-category="services">Услуги</div>
      </div>
      
      <div class="grid" id="orders-list">
        <!-- Одежда и аксессуары -->
        <div class="item" data-category="fashion">
          <img src="assets/images/image.png" alt="Fashion Campaign">
          <div class="item-content">
            <div class="item-title">Рекламная кампания модного бренда</div>
            <div class="item-description">Требуется создание стильных фото и видео для новой коллекции одежды</div>
            <div class="item-price">Бюджет: 25000 ₽</div>
            <button class="button contact-button" data-telegram="fashion_brand">Связаться с заказчиком</button>
          </div>
        </div>

        <!-- Красота и уход -->
        <div class="item" data-category="beauty">
          <img src="assets/images/image.png" alt="Beauty Products">
          <div class="item-content">
            <div class="item-title">Реклама косметического бренда</div>
            <div class="item-description">Нужны креативные видео с использованием нашей косметики</div>
            <div class="item-price">Бюджет: 20000 ₽</div>
            <button class="button contact-button" data-telegram="beauty_brand">Связаться с заказчиком</button>
          </div>
        </div>

        <!-- Электроника -->
        <div class="item" data-category="electronics">
          <img src="assets/images/image.png" alt="Electronics">
          <div class="item-content">
            <div class="item-title">Обзор новых наушников</div>
            <div class="item-description">Требуется качественный обзор беспроводных наушников с акцентом на звук</div>
            <div class="item-price">Бюджет: 15000 ₽</div>
            <button class="button contact-button" data-telegram="tech_brand">Связаться с заказчиком</button>
          </div>
        </div>

        <!-- Дом и интерьер -->
        <div class="item" data-category="home">
          <img src="assets/images/image.png" alt="Home Decor">
          <div class="item-content">
            <div class="item-title">Реклама декора для дома</div>
            <div class="item-description">Ищем креативщиков для съемки роликов с нашими предметами интерьера</div>
            <div class="item-price">Бюджет: 18000 ₽</div>
            <button class="button contact-button" data-telegram="home_decor">Связаться с заказчиком</button>
          </div>
        </div>

        <!-- Спорт и отдых -->
        <div class="item" data-category="sport">
          <img src="assets/images/image.png" alt="Sport Products">
          <div class="item-content">
            <div class="item-title">Реклама спортивного питания</div>
            <div class="item-description">Нужны динамичные видео с использованием нашего спортивного питания</div>
            <div class="item-price">Бюджет: 22000 ₽</div>
            <button class="button contact-button" data-telegram="sport_nutrition">Связаться с заказчиком</button>
          </div>
        </div>

        <!-- Еда и напитки -->
        <div class="item" data-category="food">
          <img src="assets/images/image.png" alt="Food Products">
          <div class="item-content">
            <div class="item-title">Реклама здорового питания</div>
            <div class="item-description">Ищем фуд-блогеров для создания аппетитных роликов</div>
            <div class="item-price">Бюджет: 17000 ₽</div>
            <button class="button contact-button" data-telegram="healthy_food">Связаться с заказчиком</button>
          </div>
        </div>

        <!-- Услуги -->
        <div class="item" data-category="services">
          <img src="assets/images/vpn.jpg" alt="Services">
          <div class="item-content">
            <div class="item-title">JDM VPN</div>
            <div class="item-description">JDM VPN - это VPN сервис, который находится прямо в вашем Telegram, отсутствует ограничение скорости и реклама, выбор различных серверов, самые современные и безопасные протоколы.</div>
            <div class="item-price">50% RevShare</div>
            <button class="button contact-button" data-telegram="https://t.me/JDMvpn_bot?start=1d7d2769639a">Связаться с заказчиком</button>
          </div>
        </div>
      </div>
    </div>
    
    <div class="tab-content" id="influencers">
      <h2>Инфлюенсеры</h2>
      <div class="categories" id="influencer-categories">
        <div class="category active" data-category="all">Все направления</div>
        <div class="category" data-category="beauty">Бьюти</div>
        <div class="category" data-category="lifestyle">Лайфстайл</div>
        <div class="category" data-category="sport">Спорт</div>
        <div class="category" data-category="tech">Технологии</div>
        <div class="category" data-category="fashion">Мода</div>
        <div class="category" data-category="food">Еда</div>
        <div class="category" data-category="travel">Путешествия</div>
      </div>

      <div class="grid" id="influencers-list">
        <!-- Бьюти -->
        <div class="item" data-category="beauty">
          <img src="assets/images/image.png" alt="Beauty Blogger">
          <div class="item-content">
            <div class="item-title">Мария @beauty_maria</div>
            <div class="item-description">Бьюти-блогер, снимаю обзоры и туториалы по макияжу. Аудитория 25k+, высокая вовлеченность.</div>
            <div class="item-price">Стоимость рекламы: от 5000 ₽</div>
            <button class="button contact-button" data-telegram="beauty_maria">Связаться с блогером</button>
          </div>
        </div>

        <!-- Лайфстайл -->
        <div class="item" data-category="lifestyle">
          <img src="assets/images/image.png" alt="Lifestyle Blogger">
          <div class="item-content">
            <div class="item-title">Анна @lifestyle_anna</div>
            <div class="item-description">Lifestyle блогер. Делюсь лайфхаками, обзорами полезных товаров. Аудитория 40k+.</div>
            <div class="item-price">Стоимость рекламы: от 8000 ₽</div>
            <button class="button contact-button" data-telegram="lifestyle_anna">Связаться с блогером</button>
          </div>
        </div>

        <!-- Спорт -->
        <div class="item" data-category="sport">
          <img src="assets/images/image.png" alt="Sport Blogger">
          <div class="item-content">
            <div class="item-title">Алексей @sport_alex</div>
            <div class="item-description">Фитнес-тренер, спортивный блогер. Контент о здоровом образе жизни. Аудитория 35k+.</div>
            <div class="item-price">Стоимость рекламы: от 6000 ₽</div>
            <button class="button contact-button" data-telegram="sport_alex">Связаться с блогером</button>
          </div>
        </div>

        <!-- Технологии -->
        <div class="item" data-category="tech">
          <img src="assets/images/image.png" alt="Tech Blogger">
          <div class="item-content">
            <div class="item-title">Иван @tech_ivan</div>
            <div class="item-description">Обзоры гаджетов и технологий. Качественные распаковки и тесты. Аудитория 50k+.</div>
            <div class="item-price">Стоимость рекламы: от 10000 ₽</div>
            <button class="button contact-button" data-telegram="tech_ivan">Связаться с блогером</button>
          </div>
        </div>

        <!-- Мода -->
        <div class="item" data-category="fashion">
          <img src="assets/images/image.png" alt="Fashion Blogger">
          <div class="item-content">
            <div class="item-title">София @fashion_sofia</div>
            <div class="item-description">Модный блогер. Стильные образы, обзоры брендов, советы по стилю. Аудитория 45k+.</div>
            <div class="item-price">Стоимость рекламы: от 9000 ₽</div>
            <button class="button contact-button" data-telegram="fashion_sofia">Связаться с блогером</button>
          </div>
        </div>

        <!-- Еда -->
        <div class="item" data-category="food">
          <img src="assets/images/image.png" alt="Food Blogger">
          <div class="item-content">
            <div class="item-title">Михаил @food_michael</div>
            <div class="item-description">Фуд-блогер, шеф-повар. Рецепты, обзоры ресторанов, кулинарные лайфхаки. Аудитория 30k+.</div>
            <div class="item-price">Стоимость рекламы: от 7000 ₽</div>
            <button class="button contact-button" data-telegram="food_michael">Связаться с блогером</button>
          </div>
        </div>

        <!-- Путешествия -->
        <div class="item" data-category="travel">
          <img src="assets/images/image.png" alt="Travel Blogger">
          <div class="item-content">
            <div class="item-title">Екатерина @travel_kate</div>
            <div class="item-description">Тревел-блогер. Путешествия, отели, советы для путешественников. Аудитория 38k+.</div>
            <div class="item-price">Стоимость рекламы: от 8500 ₽</div>
            <button class="button contact-button" data-telegram="travel_kate">Связаться с блогером</button>
          </div>
        </div>
      </div>
    </div>
    
    <div class="tab-content" id="categories">
      <!-- Содержимое из categories.html будет загружено сюда -->
    </div>
    
    <div class="tab-content" id="profile">
      <div id="profile-content">
        <!-- Контент будет загружен из profile.html -->
      </div>
    </div>
  </div>

  <!-- Модальное окно -->
  <div id="productModal" style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background-color: rgba(0,0,0,0.7); z-index: 9999; display: none; align-items: center; justify-content: center;">
    <div class="modal-window">
      <button class="modal-close">×</button>
      <div class="modal-image-container">
        <img id="modal-product-image" src="" alt="">
      </div>
      <div class="modal-content-container">
        <h2 id="modal-product-title"></h2>
        <p id="modal-product-description"></p>
        <p id="modal-product-price"></p>
        <button id="modal-contact-btn">Связаться</button>
      </div>
    </div>
  </div>

  <!-- Стили для модального окна -->
  <style>
    /* Базовые стили для модального окна */
    #productModal {
      overflow: hidden;
    }
    
    .modal-window {
      position: relative;
      width: 90%;
      max-width: 500px;
      max-height: 85vh;
      border-radius: 12px;
      overflow: hidden;
      background-color: #ffffff;
      color: #333333;
      box-shadow: 0 5px 15px rgba(0,0,0,0.3);
      animation: modalAppear 0.3s ease;
    }
    
    /* Темная тема */
    @media (prefers-color-scheme: dark) {
      .modal-window {
        background-color: #222222;
        color: #ffffff;
      }
      
      #modal-product-description {
        color: #cccccc;
      }
      
      #modal-product-price {
        color: #4dabf7;
      }
      
      #modal-contact-btn {
        background-color: #0d6efd;
      }
    }
    
    @keyframes modalAppear {
      from {
        transform: translateY(20px) scale(0.95);
        opacity: 0;
      }
      to {
        transform: translateY(0) scale(1);
        opacity: 1;
      }
    }
    
    .modal-close {
      position: absolute;
      top: 10px;
      right: 10px;
      width: 30px;
      height: 30px;
      background: rgba(0,0,0,0.5);
      color: white;
      border: none;
      border-radius: 50%;
      font-size: 20px;
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      z-index: 10;
    }
    
    .modal-image-container {
      width: 100%;
      height: 250px;
      overflow: hidden;
    }
    
    #modal-product-image {
      width: 100%;
      height: 100%;
      object-fit: cover;
    }
    
    .modal-content-container {
      padding: 20px;
      overflow-y: auto;
    }
    
    #modal-product-title {
      font-size: 22px;
      font-weight: bold;
      margin-bottom: 10px;
    }
    
    #modal-product-description {
      font-size: 16px;
      line-height: 1.5;
      margin-bottom: 15px;
      color: #666666;
    }
    
    #modal-product-price {
      font-size: 18px;
      font-weight: bold;
      color: #007bff;
      margin-bottom: 20px;
    }
    
    #modal-contact-btn {
      width: 100%;
      padding: 12px;
      background-color: #007bff;
      color: white;
      border: none;
      border-radius: 6px;
      font-size: 16px;
      cursor: pointer;
      transition: opacity 0.2s;
    }
    
    #modal-contact-btn:hover {
      opacity: 0.9;
    }
  </style>

  <script>
    // Функция для активации полноэкранного режима
    function enableFullscreen() {
      if (window.Telegram && window.Telegram.WebApp) {
        const webApp = window.Telegram.WebApp;
        
        // Базовая настройка WebApp
        webApp.ready();
        webApp.expand();
        
        // Установить цвет темы в соответствии с Telegram
        if (webApp.colorScheme === 'dark') {
          document.documentElement.setAttribute('data-theme', 'dark');
        }
      }
    }
    
    // Инициализация при загрузке
    document.addEventListener('DOMContentLoaded', function() {
      enableFullscreen();
      
      // Обработка событий Telegram WebApp
      if (window.Telegram && window.Telegram.WebApp) {
        const webApp = window.Telegram.WebApp;
        
        // Обработка кнопок связи
        document.querySelectorAll('.contact-button').forEach(button => {
          button.addEventListener('click', (e) => {
            e.preventDefault();
            const username = button.getAttribute('data-telegram');
            const message = encodeURIComponent('Здравствуйте! Пишу из UGC PRO.');
            const telegramLink = `https://t.me/${username}?text=${message}`;
            
            if (webApp) {
              webApp.openTelegramLink(telegramLink);
            } else {
              window.open(telegramLink, '_blank');
            }
          });
        });
      }
    });
    
    // Tabs functionality
    const tabs = document.querySelectorAll('.tab');
    const tabContents = document.querySelectorAll('.tab-content');
    
    tabs.forEach(tab => {
      tab.addEventListener('click', (e) => {
        e.preventDefault();
        const tabId = tab.getAttribute('data-tab');
        
        tabs.forEach(t => t.classList.remove('active'));
        tabContents.forEach(c => c.classList.remove('active'));
        
        tab.classList.add('active');
        document.getElementById(tabId).classList.add('active');
        
        loadTabContent(tabId);
      });
    });
    
    // Обработка категорий
    function initializeCategories() {
      // Обработка категорий для заказов
      document.querySelectorAll('#order-categories .category').forEach(category => {
        category.addEventListener('click', (e) => {
          e.preventDefault();
          const selectedCategory = category.getAttribute('data-category');
          
          document.querySelectorAll('#order-categories .category').forEach(c => {
            c.classList.remove('active');
          });
          category.classList.add('active');
          
          document.querySelectorAll('#orders-list .item').forEach(item => {
            if (selectedCategory === 'all' || item.getAttribute('data-category') === selectedCategory) {
              item.style.display = 'block';
            } else {
              item.style.display = 'none';
            }
          });
        });
      });
      
      // Обработка категорий для инфлюенсеров
      document.querySelectorAll('#influencer-categories .category').forEach(category => {
        category.addEventListener('click', (e) => {
          e.preventDefault();
          const selectedCategory = category.getAttribute('data-category');
          
          document.querySelectorAll('#influencer-categories .category').forEach(c => {
            c.classList.remove('active');
          });
          category.classList.add('active');
          
          document.querySelectorAll('#influencers-list .item').forEach(item => {
            if (selectedCategory === 'all' || item.getAttribute('data-category') === selectedCategory) {
              item.style.display = 'block';
            } else {
              item.style.display = 'none';
            }
          });
        });
      });
    }
    
    // Инициализация категорий при загрузке
    window.addEventListener('load', () => {
      initializeCategories();
      
      const userData = localStorage.getItem('userData');
      if (userData) {
        const user = JSON.parse(userData);
        
        // Активируем все кнопки
        document.querySelectorAll('button').forEach(button => {
          button.disabled = false;
        });
        
        // Заполняем данные профиля
        if (document.getElementById('profile-name-input')) {
          document.getElementById('profile-name-input').value = user.name || '';
          document.getElementById('profile-email-input').value = user.email || '';
          document.getElementById('profile-phone-input').value = user.phone || '';
          document.getElementById('profile-role-input').value = user.role || 'client';
        }
        
        // Обновляем отображение профиля
        if (document.getElementById('profile-name')) {
          document.getElementById('profile-name').textContent = user.name;
          document.getElementById('profile-email').textContent = user.email;
          document.getElementById('profile-phone').textContent = user.phone;
          document.getElementById('profile-role').textContent = user.role === 'blogger' ? 'Блогер' : 'Заказчик';
        }
        
        // Обновляем аватар
        const avatarElement = document.querySelector('.avatar');
        if (avatarElement && user.name) {
          avatarElement.textContent = user.name.charAt(0).toUpperCase();
        }
      }
    });
    
    // Обновляем функцию загрузки контента вкладок
    async function loadTabContent(tabId) {
      if (tabId === 'profile') {
        const contentDiv = document.getElementById('profile-content');
        try {
          const response = await fetch('/profile.html');
          if (response.ok) {
            const html = await response.text();
            // Извлекаем содержимое body из загруженного HTML
            const parser = new DOMParser();
            const doc = parser.parseFromString(html, 'text/html');
            const content = doc.querySelector('.profile-container');
            if (content) {
              contentDiv.innerHTML = content.outerHTML;
              
              // Загружаем стили для профиля
              if (!document.querySelector('link[href="/css/profile.css"]')) {
                const link = document.createElement('link');
                link.rel = 'stylesheet';
                link.href = '/css/profile.css';
                document.head.appendChild(link);
              }
              
              // Инициализируем обработчики событий профиля
              initializeProfileHandlers();
            }
          }
        } catch (error) {
          console.error('Error loading profile content:', error);
        }
      } else if (tabId === 'categories') {
        const contentDiv = document.getElementById(tabId);
        if (!contentDiv) return;
        
        try {
          const response = await fetch(`/${tabId}-content`);
          if (response.ok) {
            const html = await response.text();
            contentDiv.innerHTML = html;
          }
        } catch (error) {
          console.error(`Error loading content for ${tabId}:`, error);
        }
      }
    }
    
    // Функция инициализации обработчиков профиля
    function initializeProfileHandlers() {
      // Обработка изменения роли
      const roleSelect = document.getElementById('role');
      if (roleSelect) {
        roleSelect.addEventListener('change', function(e) {
          const bloggerFields = document.querySelectorAll('.blogger-fields');
          const brandFields = document.querySelectorAll('.brand-fields');
          
          if (e.target.value === 'blogger') {
            bloggerFields.forEach(el => el.classList.add('active'));
            brandFields.forEach(el => el.classList.remove('active'));
          } else {
            bloggerFields.forEach(el => el.classList.remove('active'));
            brandFields.forEach(el => el.classList.add('active'));
          }
        });
      }
      
      // Предпросмотр изображений
      function setupImagePreview(inputId, previewId) {
        const input = document.getElementById(inputId);
        const preview = document.getElementById(previewId);
        if (input && preview) {
          input.addEventListener('change', function(e) {
            const file = e.target.files[0];
            if (file) {
              const reader = new FileReader();
              reader.onload = function(e) {
                preview.src = e.target.result;
                preview.style.display = 'block';
              }
              reader.readAsDataURL(file);
            }
          });
        }
      }
      
      setupImagePreview('avatar', 'avatar-preview');
      setupImagePreview('logo', 'logo-preview');
      
      // Загрузка данных пользователя
      const data = JSON.parse(localStorage.getItem('userData') || '{}');
      if (data) {
        Object.keys(data).forEach(key => {
          const element = document.getElementById(key);
          if (element) {
            if (element.type === 'file') {
              const preview = document.getElementById(`${key}-preview`);
              if (preview && data[key]) {
                preview.src = data[key];
                preview.style.display = 'block';
              }
            } else {
              element.value = data[key];
            }
          }
        });
        
        // Активируем нужные поля в зависимости от роли
        if (roleSelect) {
          roleSelect.dispatchEvent(new Event('change'));
        }
      }
      
      // Обработка отправки формы
      const profileForm = document.getElementById('profile-form');
      if (profileForm) {
        profileForm.addEventListener('submit', async function(e) {
          e.preventDefault();
          
          const formData = new FormData(this);
          const data = {};
          
          for (let [key, value] of formData.entries()) {
            if (value instanceof File && value.size > 0) {
              try {
                const dataUrl = await new Promise((resolve, reject) => {
                  const reader = new FileReader();
                  reader.onload = () => resolve(reader.result);
                  reader.onerror = reject;
                  reader.readAsDataURL(value);
                });
                data[key] = dataUrl;
              } catch (error) {
                console.error(`Error processing file ${key}:`, error);
              }
            } else {
              data[key] = value;
            }
          }
          
          // Сохраняем данные
          localStorage.setItem('userData', JSON.stringify(data));
          
          // Обновляем аватар в шапке
          const avatarElement = document.querySelector('.avatar');
          if (avatarElement && data.name) {
            avatarElement.textContent = data.name.charAt(0).toUpperCase();
          }
          
          alert('Профиль успешно сохранен');
          
          // Перезагружаем страницу для применения изменений
          window.location.reload();
        });
      }
    }

    // Удаляем все старые обработчики для карточек
    document.addEventListener('DOMContentLoaded', function() {
      console.log('Initializing card handlers...');
      
      // Переменные для нового модального окна
      const productModal = document.getElementById('productModal');
      
      // Если старое модальное окно существует, скрываем его
      const oldModal = document.getElementById('modal');
      if (oldModal) {
        oldModal.style.display = 'none';
        console.log('Old modal hidden');
      }
      
      // Проверяем наличие карточек и добавляем обработчики
      setTimeout(function() {
        const cards = document.querySelectorAll('.item');
        console.log('Found cards:', cards.length);
        
        // Удаляем все существующие обработчики кликов с карточек
        cards.forEach(function(card) {
          const clone = card.cloneNode(true);
          card.parentNode.replaceChild(clone, card);
        });
        
        // Получаем обновленный список карточек
        const newCards = document.querySelectorAll('.item');
        
        // Добавляем новые обработчики
        newCards.forEach(function(card) {
          card.style.cursor = 'pointer';
          
          card.addEventListener('click', function(e) {
            // Игнорируем клики на кнопки
            if (e.target.closest('.button') || e.target.closest('.contact-button')) {
              return;
            }
            
            // Получаем данные
            const img = card.querySelector('img');
            const title = card.querySelector('.item-title');
            const desc = card.querySelector('.item-description');
            const price = card.querySelector('.item-price');
            
            // Заполняем модальное окно
            document.getElementById('modal-product-image').src = img ? img.src : '';
            document.getElementById('modal-product-title').textContent = title ? title.textContent : '';
            document.getElementById('modal-product-description').textContent = desc ? desc.textContent : '';
            document.getElementById('modal-product-price').textContent = price ? price.textContent : '';
            
            // Настраиваем кнопку
            const contactBtn = document.getElementById('modal-contact-btn');
            const originalBtn = card.querySelector('.contact-button');
            
            if (contactBtn && originalBtn) {
              const telegramUsername = originalBtn.getAttribute('data-telegram');
              contactBtn.onclick = function() {
                if (telegramUsername) {
                  window.open(`https://t.me/${telegramUsername}?text=Здравствуйте! Я заинтересован в сотрудничестве.`, '_blank');
                }
                productModal.style.display = 'none';
                document.body.style.overflow = '';
              };
            }
            
            // Показываем модальное окно
            productModal.style.display = 'flex';
            document.body.style.overflow = 'hidden';
            
            console.log('Modal opened for:', title ? title.textContent : 'unknown item');
          });
        });
        
        console.log('Card handlers initialized');
      }, 500);
      
      // Настраиваем закрытие модального окна
      const closeBtn = document.querySelector('.modal-close');
      if (closeBtn) {
        closeBtn.addEventListener('click', function() {
          productModal.style.display = 'none';
          document.body.style.overflow = '';
        });
      }
      
      // Закрытие по клику вне окна
      productModal.addEventListener('click', function(e) {
        if (e.target === productModal) {
          productModal.style.display = 'none';
          document.body.style.overflow = '';
        }
      });
    });
  </script>
</body>
</html> 