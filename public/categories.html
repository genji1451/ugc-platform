<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ö–∞—Ç–µ–≥–æ—Ä–∏–∏ - UGC PRO</title>
    <link rel="stylesheet" href="/css/categories.css">
</head>
<body>
    <div class="categories-container">
        <header class="categories-header">
            <h1>–ö–∞—Ç–µ–≥–æ—Ä–∏–∏</h1>
            <button class="primary-button" onclick="openCreateModal()">–î–æ–±–∞–≤–∏—Ç—å –∫–∞—Ç–µ–≥–æ—Ä–∏—é</button>
        </header>

        <div class="search-bar">
            <input type="text" placeholder="–ü–æ–∏—Å–∫ –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º..." oninput="filterCategories(this.value)">
        </div>

        <div class="categories-grid" id="categoriesGrid">
            <!-- –ö–∞—Ç–µ–≥–æ—Ä–∏–∏ –±—É–¥—É—Ç –¥–æ–±–∞–≤–ª–µ–Ω—ã —á–µ—Ä–µ–∑ JavaScript -->
        </div>

        <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è/—Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ -->
        <div class="modal" id="categoryModal">
            <div class="modal-content">
                <div class="modal-header">
                    <h2 id="modalTitle">–ù–æ–≤–∞—è –∫–∞—Ç–µ–≥–æ—Ä–∏—è</h2>
                    <button class="close-modal" onclick="closeModal()">&times;</button>
                </div>
                <div class="modal-body">
                    <form id="categoryForm" onsubmit="saveCategory(event)">
                        <div class="form-group">
                            <label for="categoryName">–ù–∞–∑–≤–∞–Ω–∏–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏</label>
                            <input type="text" id="categoryName" required>
                        </div>
                        <div class="form-group">
                            <label for="categoryDescription">–û–ø–∏—Å–∞–Ω–∏–µ</label>
                            <textarea id="categoryDescription" rows="4"></textarea>
                        </div>
                        <div class="form-group">
                            <label for="categoryIcon">–ò–∫–æ–Ω–∫–∞</label>
                            <input type="text" id="categoryIcon" placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä: üé•">
                        </div>
                        <div class="form-group">
                            <label for="categoryColor">–¶–≤–µ—Ç</label>
                            <input type="color" id="categoryColor" value="#007bff">
                        </div>
                        <div class="form-group">
                            <label>
                                <input type="checkbox" id="categoryActive" checked>
                                –ê–∫—Ç–∏–≤–Ω–∞—è –∫–∞—Ç–µ–≥–æ—Ä–∏—è
                            </label>
                        </div>
                        <div class="modal-footer">
                            <button type="button" class="secondary-button" onclick="closeModal()">–û—Ç–º–µ–Ω–∞</button>
                            <button type="submit" class="primary-button">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>

    <script>
        // –î–∞–Ω–Ω—ã–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–π
        let categories = JSON.parse(localStorage.getItem('categories')) || [
            {
                id: 1,
                name: '–ö—Ä–∞—Å–æ—Ç–∞',
                description: '–ö–æ—Å–º–µ—Ç–∏–∫–∞, —É—Ö–æ–¥ –∑–∞ —Å–æ–±–æ–π, –±—å—é—Ç–∏-–±–ª–æ–≥–µ—Ä—ã',
                icon: 'üíÑ',
                color: '#ff69b4',
                active: true
            },
            {
                id: 2,
                name: '–¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏',
                description: '–ì–∞–¥–∂–µ—Ç—ã, –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è, –æ–±–∑–æ—Ä—ã',
                icon: 'üì±',
                color: '#007bff',
                active: true
            },
            {
                id: 3,
                name: '–ï–¥–∞',
                description: '–†–µ—Ü–µ–ø—Ç—ã, —Ä–µ—Å—Ç–æ—Ä–∞–Ω—ã, –∫—É–ª–∏–Ω–∞—Ä–∏—è',
                icon: 'üç≥',
                color: '#28a745',
                active: true
            },
            {
                id: 4,
                name: '–ü—É—Ç–µ—à–µ—Å—Ç–≤–∏—è',
                description: '–¢—É—Ä–∏–∑–º, –æ—Ç–µ–ª–∏, –ø—Ä–∏–∫–ª—é—á–µ–Ω–∏—è',
                icon: '‚úàÔ∏è',
                color: '#17a2b8',
                active: true
            }
        ];

        // –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–π
        function renderCategories(filterText = '') {
            const grid = document.getElementById('categoriesGrid');
            grid.innerHTML = '';

            const filteredCategories = categories.filter(category =>
                category.name.toLowerCase().includes(filterText.toLowerCase()) ||
                category.description.toLowerCase().includes(filterText.toLowerCase())
            );

            filteredCategories.forEach(category => {
                const card = document.createElement('div');
                card.className = 'category-card';
                card.style.borderColor = category.color;
                
                card.innerHTML = `
                    <div class="category-icon" style="background-color: ${category.color}">
                        ${category.icon}
                    </div>
                    <div class="category-content">
                        <h3>${category.name}</h3>
                        <p>${category.description}</p>
                        <div class="category-status">
                            <span class="status-badge ${category.active ? 'active' : 'inactive'}">
                                ${category.active ? '–ê–∫—Ç–∏–≤–Ω–∞—è' : '–ù–µ–∞–∫—Ç–∏–≤–Ω–∞—è'}
                            </span>
                        </div>
                    </div>
                    <div class="category-actions">
                        <button class="icon-button" onclick="editCategory(${category.id})" title="–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å">
                            ‚úèÔ∏è
                        </button>
                        <button class="icon-button" onclick="deleteCategory(${category.id})" title="–£–¥–∞–ª–∏—Ç—å">
                            üóëÔ∏è
                        </button>
                    </div>
                `;
                
                grid.appendChild(card);
            });
        }

        // –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –∫–∞—Ç–µ–≥–æ—Ä–∏–π
        function filterCategories(text) {
            renderCategories(text);
        }

        // –û—Ç–∫—Ä—ã—Ç–∏–µ –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –æ–∫–Ω–∞
        function openCreateModal() {
            document.getElementById('modalTitle').textContent = '–ù–æ–≤–∞—è –∫–∞—Ç–µ–≥–æ—Ä–∏—è';
            document.getElementById('categoryForm').reset();
            document.getElementById('categoryModal').style.display = 'flex';
        }

        // –ó–∞–∫—Ä—ã—Ç–∏–µ –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –æ–∫–Ω–∞
        function closeModal() {
            document.getElementById('categoryModal').style.display = 'none';
        }

        // –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏
        function editCategory(id) {
            const category = categories.find(c => c.id === id);
            if (!category) return;

            document.getElementById('modalTitle').textContent = '–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –∫–∞—Ç–µ–≥–æ—Ä–∏—é';
            document.getElementById('categoryName').value = category.name;
            document.getElementById('categoryDescription').value = category.description;
            document.getElementById('categoryIcon').value = category.icon;
            document.getElementById('categoryColor').value = category.color;
            document.getElementById('categoryActive').checked = category.active;

            document.getElementById('categoryForm').dataset.editId = id;
            document.getElementById('categoryModal').style.display = 'flex';
        }

        // –£–¥–∞–ª–µ–Ω–∏–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏
        function deleteCategory(id) {
            if (confirm('–í—ã —É–≤–µ—Ä–µ–Ω—ã, —á—Ç–æ —Ö–æ—Ç–∏—Ç–µ —É–¥–∞–ª–∏—Ç—å —ç—Ç—É –∫–∞—Ç–µ–≥–æ—Ä–∏—é?')) {
                categories = categories.filter(c => c.id !== id);
                localStorage.setItem('categories', JSON.stringify(categories));
                renderCategories();
            }
        }

        // –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏
        function saveCategory(event) {
            event.preventDefault();

            const formData = {
                name: document.getElementById('categoryName').value,
                description: document.getElementById('categoryDescription').value,
                icon: document.getElementById('categoryIcon').value,
                color: document.getElementById('categoryColor').value,
                active: document.getElementById('categoryActive').checked
            };

            const editId = document.getElementById('categoryForm').dataset.editId;

            if (editId) {
                // –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–π –∫–∞—Ç–µ–≥–æ—Ä–∏–∏
                const index = categories.findIndex(c => c.id === parseInt(editId));
                if (index !== -1) {
                    categories[index] = { ...categories[index], ...formData };
                }
            } else {
                // –°–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤–æ–π –∫–∞—Ç–µ–≥–æ—Ä–∏–∏
                const newId = Math.max(...categories.map(c => c.id), 0) + 1;
                categories.push({ id: newId, ...formData });
            }

            localStorage.setItem('categories', JSON.stringify(categories));
            renderCategories();
            closeModal();
        }

        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
        document.addEventListener('DOMContentLoaded', () => {
            renderCategories();
        });

        // –ó–∞–∫—Ä—ã—Ç–∏–µ –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –æ–∫–Ω–∞ –ø—Ä–∏ –∫–ª–∏–∫–µ –≤–Ω–µ –µ–≥–æ
        window.onclick = function(event) {
            const modal = document.getElementById('categoryModal');
            if (event.target === modal) {
                closeModal();
            }
        };
    </script>
</body>
</html> 